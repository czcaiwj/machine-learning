# 第6周 机器学习的最佳实践（1）

## 一、创建一个垃圾邮件分类器

### 1.1 优先做什么？

给定一个email数据集，我们可以为每封邮件构建一个向量，向量的每个元素代表整个邮件集中最常见的1万到5万个单词，某个单词如果出现在邮件中，该对应的元素就标记为1，否则标记为0。当完成都所有邮件的标记工作后，就可以训练我们的模型来进行垃圾邮件分类。

接下来应该把时间花费在哪些地方来提高这个分类器的准确性呢？

+ 利用“蜜罐”来收集更多的数据。
+ 构建复杂的特征，如提取垃圾邮件的头信息
+ 开发算法来适配不同方式的输入（如识别垃圾邮件中故意拼写错误的单词）

很难断定拿种方式对提供分类准确性有更大的帮助。

### 1.2 错误分析

解决机器学习问题的推荐方法是：

+ 快速实现一个简单的算法，并通过交叉验证集来进行测试。
+ 画出学习曲线来判断是要收集更多数据、提取更多特征还是其他方法来改进算法。
+ 用交叉验证集的数据去测试算法，尝试找到大多数错误出现的地方和趋势。

比如说我们有一个500封邮件的数据集，机器学习算法把其中的100个邮件给错误分类了。我们可以手工查看这100封邮件，看看都具有什么样的特征。然后我们可以提出新的假设或特征，来重新测试，看看错误率会不会减少。因此，如果我们的大部分错误分类的邮件是那些试图窃取密码，那么我们可以找到这类邮件的某些特定的特征，把这些特征加入到算法模型中。

用一个数值来描述错误结果是非常重要的，否则很难评估算法的性能。例如，如果我们使用词干处理，将不同形式的单词（fail/failing/failed）视为一个单词（fail），然后错误率从5%下降到3%。那我们肯定要把词干处理这种处理方法添加到我们的模型中。相反，如果我们尝试区分字母的大小写，例如把fail和Fail当成两个不同的单词，结果错误率反而上升了，那么我们就应该避免使用该功能。

所以，我们应该尝试新思路，获取错误率，然后根据错误率的升降来确定是否要保留这些新功能。